{{ define "main" }}
<!-- Floating elements -->
<div class="fixed inset-0 overflow-hidden -z-10 pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-2 h-2 bg-primary rounded-full opacity-20 animate-float"></div>
    <div class="absolute top-1/3 right-1/3 w-3 h-3 bg-secondary rounded-full opacity-20 animate-float animation-delay-2000"></div>
    <div class="absolute bottom-1/4 right-1/4 w-1 h-1 bg-accent rounded-full opacity-20 animate-float animation-delay-3000"></div>
</div>

<!-- Hero Section -->
<section class="container mx-auto px-6 py-16 md:py-24 no-print">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-16">
            <span class="inline-block px-3 py-1 rounded-full bg-surface text-primary text-sm font-medium mb-4">{{ .Params.badge | default "À Propos" }}</span>
            <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-6">
                <span class="text-gradient">{{ .Title | default "Mon Parcours" }}</span>
            </h1>
            <p class="text-lg text-text-secondary max-w-2xl mx-auto">
                {{ .Params.subtitle | default "Découvrez mon parcours, mes passions et ce qui me motive dans le développement backend." }}
            </p>
        </div>
    </div>
</section>

<!-- Content Section -->
<section class="container mx-auto px-6 pb-16">
    <div class="max-w-4xl mx-auto">
        <div class="grid lg:grid-cols-3 gap-12">
            <!-- Main Content -->
            <div class="lg:col-span-2">
                <div class="prose prose-lg prose-invert max-w-none">
                    <div class="markdown-content">
                        <!-- Contenu avec formatage Markdown personnalisé -->
                        <div class="content-markdown mb-12">
                            {{ $content := .RawContent }}
                            {{ if in $content "<!--more-->" }}
                            {{ $parts := split $content "<!--more-->" }}
                            {{ if gt (len $parts) 1 }}
                            {{ index $parts 1 | markdownify }}
                            {{ end }}
                            {{ else }}
                            {{ .Content }}
                            {{ end }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="sticky top-8 space-y-8">
                    <!-- Profile Card -->
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors">
                        <div class="text-center mb-6">
                                <img class="w-20 h-20 rounded-full bg-primary/10 border-2 border-primary/20 flex items-center justify-center mx-auto mb-4" src="{{ .Params.profile.profile_picture }}">
                            <h3 class="text-xl font-semibold mb-2">{{ .Site.Params.first_name }} {{ .Site.Params.last_name }}</h3>
                            <p class="text-text-secondary">{{ .Params.profile.title | default "Développeur Backend" }}</p>
                        </div>
                        <div class="space-y-3 text-sm">
                            {{ if .Site.Params.birthdate }}
                            {{ $birthdate := time .Site.Params.birthdate }}
                            {{ $now := now }}
                            {{ $age := sub (div (sub $now.Unix $birthdate.Unix) 31556952) 0 }}
                            <div class="flex items-center">
                                <span class="w-20 text-text-secondary">Âge:</span>
                                <span>{{ $age }} ans</span>
                            </div>
                            {{ end }}
                            {{ if .Params.profile.location }}
                            <div class="flex items-center">
                                <span class="w-20 text-text-secondary">Lieu:</span>
                                <span>{{ .Params.profile.location }}</span>
                            </div>
                            {{ end }}
                            {{ if .Params.profile.experience }}
                            <div class="flex items-center">
                                <span class="w-20 text-text-secondary">Exp:</span>
                                <span>{{ .Params.profile.experience }}</span>
                            </div>
                            {{ end }}
                        </div>
                    </div>

                    <!-- Experience -->
                    {{ if .Params.experience }}
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors">
                        <h3 class="text-lg font-semibold mb-4">Expérience</h3>
                        <div class="space-y-4">
                            {{ range .Params.experience }}
                            <div class="border-l-2 border-primary/30 pl-4 pb-4">
                                <h4 class="font-medium text-sm">{{ .title }}</h4>
                                <p class="text-xs text-text-secondary mb-1">{{ .company }} • {{ .duration }}</p>
                                {{ if .description }}
                                <p class="text-xs text-text-secondary">{{ .description }}</p>
                                {{ end }}
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}

                    <!-- Education -->
                    {{ if .Params.education }}
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors">
                        <h3 class="text-lg font-semibold mb-4">Formation</h3>
                        <div class="space-y-4">
                            {{ range .Params.education }}
                            <div class="border-l-2 border-primary/30 pl-4 pb-4">
                                <h4 class="font-medium text-sm">{{ .degree }}</h4>
                                <p class="text-xs text-text-secondary mb-1">{{ .school }} • {{ .year }}</p>
                                {{ if .status }}
                                <p class="text-xs text-primary">{{ .status }}</p>
                                {{ end }}
                                {{ if .mention }}
                                <p class="text-xs text-text-secondary">{{ .mention }}</p>
                                {{ end }}
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}

                    <!-- Skills -->
                    {{ if .Params.skills }}
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors">
                        <h3 class="text-lg font-semibold mb-4">Compétences</h3>
                        <div class="space-y-3">
                            {{ range .Params.skills }}
                            <div>
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm font-medium">{{ .name }}</span>
                                    <span class="text-xs text-text-secondary">{{ .level }}%</span>
                                </div>
                                <div class="w-full bg-background rounded-full h-2">
                                    <div class="bg-primary rounded-full h-2 transition-all duration-300" style="width: {{ .level }}%"></div>
                                </div>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}

                    <!-- Soft Skills -->
                    {{ if .Params.soft_skills }}
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors">
                        <h3 class="text-lg font-semibold mb-4">Soft Skills</h3>
                        <div class="space-y-2">
                            {{ range .Params.soft_skills }}
                            <div class="flex items-center text-sm">
                                <div class="w-2 h-2 rounded-full bg-primary mr-3 flex-shrink-0"></div>
                                <span>{{ . }}</span>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}

                    <!-- Technologies -->
                    {{ if .Params.technologies }}
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors">
                        <h3 class="text-lg font-semibold mb-4">Technologies</h3>
                        {{ if .Params.technologies.backend }}
                        <!-- Technologies organisées par catégories -->
                        {{ range $category, $techs := .Params.technologies }}
                        {{ if ne $category "backend" }}{{ continue }}{{ end }}
                        <div class="mb-4">
                            <h4 class="text-sm font-medium text-text-secondary mb-2 capitalize">{{ $category }}</h4>
                            <div class="flex flex-wrap gap-2">
                                {{ range $techs }}
                                <span class="px-2 py-1 rounded-full bg-background text-primary text-xs font-medium">{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                        {{ range $category, $techs := .Params.technologies }}
                        {{ if eq $category "backend" }}{{ continue }}{{ end }}
                        <div class="mb-4">
                            <h4 class="text-sm font-medium text-text-secondary mb-2 capitalize">{{ $category }}</h4>
                            <div class="flex flex-wrap gap-2">
                                {{ range $techs }}
                                <span class="px-2 py-1 rounded-full bg-background text-primary text-xs font-medium">{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                        {{ else }}
                        <!-- Technologies en liste simple -->
                        <div class="flex flex-wrap gap-2">
                            {{ range .Params.technologies }}
                            <span class="px-3 py-1 rounded-full bg-background text-primary text-xs font-medium">{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                    {{ end }}

                    <!-- Contact CTA -->
                    <div class="bg-surface rounded-xl p-6 border border-surface hover:border-primary/30 transition-colors no-print">
                        <h3 class="text-lg font-semibold mb-3">Besoin de parler ?</h3>
                        {{ if .Params.profile.email }}
                        <a href="mailto:{{ .Params.profile.email }}" class="block w-full px-4 py-2 rounded-md bg-primary hover:bg-primary-dark text-background font-medium text-center transition-colors mb-3">
                            Contactez moi
                        </a>
                        {{ else }}
                        <a href="mailto:contact@nhoul.fr" class="block w-full px-4 py-2 rounded-md bg-primary hover:bg-primary-dark text-background font-medium text-center transition-colors mb-3">
                            Contactez moi
                        </a>
                        {{ end }}

                        <!-- Liens sociaux -->
                        {{ if or .Params.profile.linkedin .Params.profile.github }}
                        <div class="flex space-x-2 pt-2 border-t border-background">
                            {{ if .Params.profile.linkedin }}
                            <a href="{{ .Params.profile.linkedin }}" target="_blank" class="flex-1 px-3 py-2 rounded-md bg-background hover:bg-primary/10 text-text-secondary hover:text-primary text-center text-sm transition-colors">
                                LinkedIn
                            </a>
                            {{ end }}
                            {{ if .Params.profile.github }}
                            <a href="{{ .Params.profile.github }}" target="_blank" class="flex-1 px-3 py-2 rounded-md bg-background hover:bg-primary/10 text-text-secondary hover:text-primary text-center text-sm transition-colors">
                                GitHub
                            </a>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{{ end }}